(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{338:function(t,s,a){"use strict";a.r(s);var _=a(7),v=Object(_.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("数据采用多pod方案增加镜像，而不能增大内存。")]),t._v(" "),s("h2",{attrs:{id:"_1-为什么要采用多镜像思路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-为什么要采用多镜像思路"}},[t._v("#")]),t._v(" 1.为什么要采用多镜像思路？")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("由于没有"),s("code",[t._v("注册中心")]),t._v("，数据的安全性至关重要，"),s("code",[t._v("多pod")]),t._v("镜像模式可以做到，1pod在，多pod都在。")])]),t._v(" "),s("li",[s("p",[t._v("多pod思路，pod较为统一，"),s("code",[t._v("协同管理")]),t._v("比较方便。")])]),t._v(" "),s("li",[s("p",[t._v("k8s本身对于时间挂载卷扩容就比较方便，无需再次实现数据的统一管理")])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("redis 其实部分替代了注册中心的功能，如在redis里进行心跳，选出最优pod。")])]),t._v(" "),s("h3",{attrs:{id:"_1-1-使用k8s动态卷分配"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-使用k8s动态卷分配"}},[t._v("#")]),t._v(" 1.1.使用k8s动态卷分配")]),t._v(" "),s("p",[t._v("每个新起来的pod都会分配给一个全新的pv（存储空间），后迅速与其他pod进行数据同步，由于每个pod都有不同的空间，保证了相对较高的io性能。")]),t._v(" "),s("h3",{attrs:{id:"_1-2-pod之间的状态关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-pod之间的状态关系"}},[t._v("#")]),t._v(" 1.2.pod之间的状态关系")]),t._v(" "),s("p",[t._v("由于pod在k8s cluster 中是随机负载均衡的，那么，控制无论访问哪个pod，得到相同的结果至关重要。由于各种数据内部的流动关系，或者网络等环境状态不同，image-manage有三重手段保证数据一直。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("image-manage使用三重手段保证数据同步。")])]),t._v(" "),s("h3",{attrs:{id:"_1-3-md5去重过滤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-md5去重过滤"}},[t._v("#")]),t._v(" 1.3.md5去重过滤")]),t._v(" "),s("p",[t._v("由于可能存在重复文件，因此当用户上传文件后，image-manage会进行一次md5计算，如果存在当前文件，image-manage并不会再次存储文件，而是把用户文件引用指向已经存在的文件。")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("当然，md5去重并非完美无缺，当文件庞大到一定的数量级的时候会存在md5碰撞，不过md5代价较小，一般情况下，nd5足够")])])])}),[],!1,null,null,null);s.default=v.exports}}]);